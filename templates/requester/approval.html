{% extends 'base.html' %}

{% load crispy_forms_tags %}

{% block content %}

<div class="container d-flex h-100">
  <div class="row m-auto">
    <div class="col-sm">
    <h3 class="jumbotron text-center">Contributor Payment Approval</h3>
    <p>Here you can see who has contributed to your task request.
        Select the contributor you would like to approve for payment.</p>
      {% if user.authorized_requester%}
        {% for message in messages %}
          <div class="py-5 alert {{ message.tags }} text-center">{{ message }}</div>
        {% endfor %}
        {% if task.get_status_display == 'Pending' %}
          <h2 class="text-center">Contributor List Unavailable - This task is still pending!</h2>
        {% elif approval_left %}
            {% if task.get_status_display == 'Active' %}
              <p>Note: This task is still active. Don't forget to check back later for other contributors.</p>
            {% endif %}
          <h2 class="text-center"> {{ task.title }} </h2>
          <form action="" method="post">
            {% csrf_token %}
            <div>{{ form_approval|crispy }}</div>
            <input type="submit" class="d-block mx-auto my-3 btn btn-dark" name="approve" value="Confirm"></input>
          </form>
          <p class="text-center">*Please keep in mind that the confirmation of payment for selected participants is final.</p>
        {% else %}
          <h2 class="text-center" >You have no one left to approve on this task!</h2>
        {% endif %}
      {% else %}
        <h2 class="text-center" >You must be an authorized requester in order to access this page.</h2>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
